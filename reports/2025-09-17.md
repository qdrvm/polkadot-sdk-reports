# Report - 17-09-2025

* **Period:** 03092025 - 17092025
* **Previous report:** [https://github.com/qdrvm/polkadot-sdk-reports/blob/master/reports/2025-08-20.md](https://github.com/qdrvm/polkadot-sdk-reports/blob/master/reports/2025-09-03.md)
* **Treasury grant scope**: Ref. 1689: Polkadot-SDK improvements proposal 1

### Main highlights:

* State sync:
  * Bug with handling child storage during state sync was found and fixed
  * Node does not crash during sync of Polkadot's state when running on 4GB RAM instance
    * Previously it was crashing
  * The [PR](https://github.com/paritytech/polkadot-sdk/pull/9247) is fully ready and is currently being discussed with Basti
  * To move forward with the PR we might need a call with Basti & Sebastian
* Shadow integration.
  * Team spent significant time debugging networking issues when running Polkadot-SDK under Shadow
    * It was discovered that due to only partial support of UDP which was used by mdns. Luckily, with `--no-mdns` flag it could be disabled
    * Two validators network runs well, the process of launching simulation is described in the issue: https://github.com/paritytech/polkadot-sdk/issues/9748#issuecomment-3297786055
  * The full network with relay chain validators and collators will require changes of prepare/execute worker processes, due to missing shadow support of system call for spawning new processes
  * Ongoing PRs:
    * Disabling Jemalloc: https://github.com/paritytech/polkadot-sdk/pull/9472
* [Multi-slot collation] Testing collator cencoring
  * Two parallel efforts are in progress by Quadrivium team
  * 1. Setting up necessary environment via zombienet + podman
    * Parity DevOps team confirmed that using zombienet with Podman is not stable with the latest versions of zombienet and Polkadot-SDK
    * We managed to run simple network of validators
    * Adding collators lead to bugs during chain spec generation
  * 2. Setting environment using Shadow and then reduce bandwidth between honest and malicious collators to 0
    * As described previously Polkadot-SDK is struggling with spawning prepare/execute workers, additional hacking of Polkadot-SDK might be required to either enable PVF validation by Polkadot binary, or updating spawning mechanism
* [Multi-slot collation] Testing changing of a slot time
  * [PR](https://github.com/paritytech/polkadot-sdk/pull/9690) for updating slot time via extrinsic was created, but likely will be closed as it was considered as "overkill". Instead runtime update approach was considered
  * Running parachains with increased slot time from genesis had no issues
  * Slot number is calculated by dividing `current_time` by `slot_duration`, therefore naive increase of parachain slot time on running chain leads to multiple issues:
    * Messed up validators rotation
    * Assert panic: 
    ```rust
      assert_eq!(
        CurrentSlot::<T>::get(),
        timestamp_slot,
        "Timestamp slot must match `CurrentSlot`. This likely means that the configured block \
        time in the node and/or rest of the runtime is not compatible with Aura's \
        `SlotDuration`",
    );
    ```
    
    * Broken equivocation protection (several blocks with the same slot number):
    ```rust
    if self.defender.lock().insert_and_check(
        slot,
        *block_params.header.number(),
        relay_parent,
    ) && !matches!(block_params.origin, BlockOrigin::ConsensusBroadcast)
    ```
    * Incorrect block author definition
    ```rust
    let slot = Slot::decode(&mut data).ok()?;
    let author_index = *slot % Self::authorities_len() as u64;
    return Some(author_index as u32)
    ```

* Compact archive node
  * WIP
* Faster erasure-coding (RFC-139)
  * Deprioritized in favor of multi-slot collation
 
